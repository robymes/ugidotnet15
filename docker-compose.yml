version: "2"
services:
    mongo:
        image: mongo:3.2
        network_mode: bridge
        ports:
            - "27017:27017"
        container_name: mongo
        volumes:
            - mongodata:/data/db
        command: --smallfiles --rest --httpinterface
    nginx-proxy:
        image: jwilder/nginx-proxy
        container_name: nginx-proxy
        network_mode: bridge
        ports:
            - "80:80"
        volumes:
            - /var/run/docker.sock:/tmp/docker.sock:ro
        restart: always
    node-rest-srvc:
        image: ugidotnet15/node-rest-srvc:latest
        container_name: node-rest-srvc
        network_mode: bridge
        environment:
            - VIRTUAL_HOST=node-rest-srvc.local
        links:
            - mongo:mongo   
volumes:
    mongodata: